import{u as k,r,aS as $,j as e,bM as n,B as c,D as M,g as N,a as d,h as C,bP as v,c as A,bi as P,aD as L}from"./index-dd631538.js";function O(){const s=k(j=>j.auth.user),[b,i]=r.useState(!1),[g,m]=r.useState(!1),[y,_]=r.useState(),[l,u]=r.useState(!1),[t,S]=r.useState(39),[D,o]=r.useState(!1),f=$(),p=j=>{if(j&&j.seconds>new Date().getTime()/1e3){const R=Math.floor((j.seconds-new Date().getTime()/1e3)/60/60/24);m(!0),_(R+" días restantes")}else m(!1)};r.useEffect(()=>{s&&s.mr_sport_money_expires_at?(S(39),p(s.mr_sport_money_expires_at)):m(!1),s&&s.has_bought_mr_sport&&S(39)},[s]);const a=async()=>{o(!0);try{await x(t),await h()}catch{console.log("Error en la compra de MrSportMoney")}finally{o(!1),i(!1),u(!0)}},x=async j=>{const R=new Date,w=new Date;w.setDate(R.getDate()+30);const E=N(d,`users/${s.uid}`);await C(E,{credits:Number(s.credits)-t,mr_sport_money_expires_at:w,has_bought_mr_sport:!0}),await v(A(d,`users/${s.uid}/credits-history/`),{id_user:s.uid,email:s.email,name:s.name,total:j,created_at:R,concept:"Compra de Acceso de Mr Sport Money en Marketplace Servicios Digital ",mr_sport_money_expires_at:w}),await v(A(d,`users/${s.uid}/digital-marketplace-purchases/`),{user_id:s.uid,email:s.email,purchase:"Compra de Acceso de Mr Sport Money en Marketplace Servicios Digital ",cost:t,created_at:new Date})},h=async()=>{if(!s.uid)return;const j=N(d,"users",s.uid);await C(j,{credits_spent_this_month:P(Number(t))})};return e.jsxs("div",{className:"bg-gray-100 flex flex-col items-center rounded-lg px-4 pb-4",children:[e.jsx("img",{src:"/img/digital-marketplace/mr-sport-money.jpg",className:"max-w-[250px] max-h-[250px] flex-1 object-contain"}),e.jsx("div",{className:"flex justify-start w-full text-lg",children:e.jsx("span",{className:"font-bold",children:"Acceso a Mr. Sport Money "})}),e.jsxs("div",{className:"flex justify-start w-full space-x-2",children:[e.jsxs("span",{className:"font-medium",children:[t," créditos"]}),e.jsx("span",{className:"line-through text-gray-400",children:"79 créditos"})]}),e.jsx("div",{className:"flex justify-start w-full space-x-2",children:g?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"font-bold text-green-400",children:"Activa:"}),e.jsx("span",{className:" text-gray-400",children:y})]}):e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Duración:"}),e.jsx("span",{className:" text-gray-400",children:"30 días"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Reconsumo:"}),e.jsx("span",{className:"text-gray-400",children:"39 créditos"})]})]})}),e.jsxs("div",{className:"flex justify-start items-center w-full pb-4 space-x-2",children:[e.jsxs("div",{className:"flex justify-start text-yellow-500 space-x-1",children:[e.jsx(n,{}),e.jsx(n,{}),e.jsx(n,{}),e.jsx(n,{}),e.jsx(n,{})]}),e.jsx("div",{children:e.jsx("span",{className:"font-medium",children:"En existencia"})})]}),s&&typeof s.credits=="number"?s.credits<t?e.jsx(c,{disabled:!0,className:"px-4 py-2 font-semibold rounded bg-gray-400 text-gray-700 cursor-not-allowed",children:"Creditos insuficientes"}):e.jsx(c,{disabled:g,className:`px-4 py-2 font-semibold rounded bg-gray-400 text-gray-700 ${g&&"mt-4"}`,onClick:()=>i(!0),children:g?y:"Comprar Acceso"}):e.jsx(c,{disabled:!0,className:"px-4 py-2 font-semibold rounded bg-gray-400 text-gray-700 cursor-not-allowed",children:"Creditos insuficientes"}),e.jsx(M,{isOpen:b,onClose:()=>i(!1),children:e.jsxs("div",{children:[e.jsxs("span",{className:"pt-4",children:["Desea comprar este producto por ",t," créditos?"]}),e.jsxs("div",{className:"flex justify-between w-full mt-4",children:[e.jsx(c,{loading:D,onClick:()=>a(),children:"ACEPTAR"}),e.jsx(c,{onClick:()=>i(!0),children:"CERRAR"})]})]})}),e.jsx(M,{isOpen:l,onClose:()=>{u(!1),f("/home")},children:e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-center",children:"¡Su compra se ha realizado exitosamente!"}),e.jsxs("p",{children:["La compra de su producto ha sido realizada con éxito. Una vez adquirido el servicio, deberás tomar una captura de pantalla y comunicarte al siguiente número para la activación:"," ",e.jsx("span",{className:"font-bold",children:" +52 3345813983"})]}),e.jsxs("p",{className:"font-bold",children:["Nombre: ",e.jsx("span",{className:"font-normal",children:s.name})]}),e.jsxs("p",{className:"font-bold",children:["Correo: ",e.jsx("span",{className:"font-normal",children:s.email})]}),e.jsxs("p",{className:"font-bold",children:["Fecha de Adquisición:"," ",e.jsx("span",{className:"font-normal",children:new Date().toLocaleString("es-MX",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"})})]}),e.jsx("div",{className:"flex justify-end mt-4",children:e.jsx(c,{onClick:()=>{u(!1),f("/home")},children:"Aceptar"})})]})})]})}function H(){const s=k(w=>w.auth.user),[b,i]=r.useState(!1),[g,m]=r.useState(!1),[y,_]=r.useState(),[l,u]=r.useState(39),[t,S]=r.useState(!1),[D,o]=r.useState(!1),[f,p]=r.useState(!1),a=$(),x=w=>{if(w&&w.seconds>new Date().getTime()/1e3){const E=Math.floor((w.seconds-new Date().getTime()/1e3)/60/60/24);m(!0),_(E+" días restantes")}else m(!1)};r.useEffect(()=>{s&&s.mr_money_power_expires_at?(u(39),x(s.mr_money_power_expires_at),S(!0)):m(!1),s&&s.has_bought_mr_money_power&&u(39)},[s]);const h=async()=>{p(!0);try{await j(l),await R()}catch{console.log("Error en la compra de mrMoneyPwer")}finally{p(!1),i(!1),o(!0)}},j=async w=>{const E=new Date,T=new Date;T.setDate(E.getDate()+30);const F=N(d,`users/${s.uid}`);await L(F),await C(F,{credits:Number(s.credits)-l,mr_money_power_expires_at:T,has_bought_mr_money_power:!0}),await v(A(d,`users/${s.uid}/credits-history/`),{id_user:s.uid,email:s.email,name:s.name,total:w,created_at:E,concept:"Compra de Acceso de Mr Money Power en Marketplace Servicios Digital ",mr_money_power_expires_at:T}),await v(A(d,`users/${s.uid}/digital-marketplace-purchases/`),{user_id:s.uid,email:s.email,purchase:"Compra de Acceso de Mr Money Power en Marketplace Servicios Digital ",cost:l,created_at:new Date})},R=async()=>{if(!s.uid)return;const w=N(d,"users",s.uid);await C(w,{credits_spent_this_month:P(Number(l))})};return e.jsxs("div",{className:"bg-gray-100 flex flex-col items-center rounded-lg px-4 pb-4",children:[e.jsx("img",{src:"/img/digital-marketplace/mr-money-power.png",className:"max-w-[250px] max-h-[250px] flex-1 object-contain"}),e.jsx("div",{className:"flex justify-start w-full text-lg",children:e.jsx("span",{className:"font-bold",children:"Acceso a Mr. Money Power "})}),e.jsxs("div",{className:"flex justify-start w-full space-x-2",children:[e.jsxs("span",{className:"font-medium",children:[l," créditos"]}),e.jsx("span",{className:"line-through text-gray-400",children:"79 créditos"})]}),e.jsx("div",{className:"flex justify-start w-full space-x-2",children:g?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"font-bold text-green-400",children:"Activa:"}),e.jsx("span",{className:" text-gray-400",children:y})]}):e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Duración:"}),e.jsx("span",{className:" text-gray-400",children:" 30 días"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Reconsumo:"}),e.jsx("span",{className:" text-gray-400",children:" 39 créditos"})]})]})}),e.jsxs("div",{className:"flex justify-start items-center w-full pb-4 space-x-2",children:[e.jsxs("div",{className:"flex justify-start text-yellow-500 space-x-1",children:[e.jsx(n,{}),e.jsx(n,{}),e.jsx(n,{}),e.jsx(n,{}),e.jsx(n,{})]}),e.jsx("div",{children:e.jsx("span",{className:"font-medium",children:"En existencia"})})]}),s&&typeof s.credits=="number"?s.credits<l?e.jsx(c,{disabled:!0,className:"px-4 py-2 font-semibold rounded bg-gray-400 text-gray-700 cursor-not-allowed",children:"Creditos insuficientes"}):e.jsx(c,{disabled:g,className:`px-4 py-2 font-semibold rounded bg-gray-400 text-gray-700 ${g&&"mt-4"}`,onClick:()=>i(!0),children:g?y:"Comprar Acceso"}):e.jsx(c,{disabled:!0,className:"px-4 py-2 font-semibold rounded bg-gray-400 text-gray-700 cursor-not-allowed",children:"Creditos insuficientes"}),e.jsx(M,{isOpen:b,onClose:()=>i(!1),children:e.jsxs("div",{children:[e.jsxs("span",{className:"pt-4",children:["Desea comprar este producto por ",l," créditos?"]}),e.jsxs("div",{className:"flex justify-between w-full mt-4",children:[e.jsx(c,{onClick:()=>h(),loading:f,children:"ACEPTAR"}),e.jsx(c,{onClick:()=>i(!0),children:"CERRAR"})]})]})}),e.jsx(M,{isOpen:D,onClose:()=>{o(!1),a("/home")},children:e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-center",children:"¡Su compra se ha realizado exitosamente!"}),e.jsxs("p",{children:["La compra de su producto ha sido realizada con éxito. Una vez adquirido el servicio, deberás tomar una captura de pantalla y comunicarte al siguiente número para la activación:"," ",e.jsx("span",{className:"font-bold",children:" +52 3345813983"})]}),e.jsxs("p",{className:"font-bold",children:["Nombre: ",e.jsx("span",{className:"font-normal",children:s.name})]}),e.jsxs("p",{className:"font-bold",children:["Correo: ",e.jsx("span",{className:"font-normal",children:s.email})]}),e.jsxs("p",{className:"font-bold",children:["Fecha de Adquisición:"," ",e.jsx("span",{className:"font-normal",children:new Date().toLocaleString("es-MX",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"})})]}),e.jsx("div",{className:"flex justify-end mt-4",children:e.jsx(c,{onClick:()=>{o(!1),a("/home")},children:"Aceptar"})})]})})]})}function B(){const s=k(a=>a.auth.user),[b,i]=r.useState(!1),[g,m]=r.useState(!1),[y,_]=r.useState(),[l,u]=r.useState(!1),[t,S]=r.useState(49),D=a=>{if(a&&a.seconds>new Date().getTime()/1e3){const x=Math.floor((a.seconds-new Date().getTime()/1e3)/60/60/24);u(!0),_(x+" días restantes")}else u(!1)};r.useEffect(()=>{s&&s.pro_funnel_expires_at?D(s.pro_funnel_expires_at):u(!1)},[s]);const o=async()=>{m(!0);try{await p(t),await f()}catch{console.log("Error en la compra de ProFunnel")}finally{i(!1),m(!1)}},f=async()=>{if(!s.uid)return;const a=N(d,"users",s.uid);await C(a,{credits_spent_this_month:P(Number(t))})},p=async a=>{const x=new Date,h=new Date;h.setDate(x.getDate()+30);const j=N(d,`users/${s.uid}`);await C(j,{credits:Number(s.credits)-t,pro_funnel_expires_at:h}),await v(A(d,`users/${s.uid}/credits-history/`),{id_user:s.uid,email:s.email,name:s.name,total:a,created_at:x,concept:"Compra de Acceso de Pro Funnel",pro_funnel_expires_at:h}),await v(A(d,`users/${s.uid}/digital-marketplace-purchases/`),{user_id:s.uid,email:s.email,purchase:"Compra de Acceso de Pro Funnel",cost:t,created_at:new Date})};return e.jsxs("div",{className:"bg-gray-100 flex flex-col items-center rounded-lg px-4 pb-4",children:[e.jsx("img",{src:"/img/digital-marketplace/marketing-top-funnel.png",className:"max-w-[250px] max-h-[250px] flex-1 object-contain"}),e.jsx("div",{className:"flex justify-start w-full text-lg",children:e.jsx("span",{className:"font-bold",children:"Acceso a Pro Funnel "})}),e.jsxs("div",{className:"flex justify-start w-full space-x-2",children:[e.jsxs("span",{className:"font-medium",children:[t," créditos"]}),e.jsxs("span",{className:"line-through text-gray-400",children:[t+20," créditos"]})]}),e.jsx("div",{className:"flex justify-start w-full space-x-2",children:l?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"font-bold text-green-400",children:"Activa:"}),e.jsx("span",{className:" text-gray-400",children:y})]}):e.jsx("div",{className:"flex flex-col",children:e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Duración:"}),e.jsx("span",{className:" text-gray-400",children:"30 días"})]})})}),e.jsxs("div",{className:"flex justify-start items-center w-full pb-4 space-x-2",children:[e.jsxs("div",{className:"flex justify-start text-yellow-500 space-x-1",children:[e.jsx(n,{}),e.jsx(n,{}),e.jsx(n,{}),e.jsx(n,{}),e.jsx(n,{})]}),e.jsx("div",{children:e.jsx("span",{className:"font-medium",children:"En existencia"})})]}),s&&typeof s.credits=="number"?s.credits<t?e.jsx(c,{disabled:!0,className:"px-4 py-2 font-semibold rounded bg-gray-400 text-gray-700 cursor-not-allowed mt-4",children:"Creditos insuficientes"}):e.jsx(c,{disabled:l,className:"px-4 py-2 font-semibold rounded bg-gray-400 text-gray-700 mt-4",onClick:()=>i(!0),children:l?y:"Comprar Acceso"}):e.jsx(c,{disabled:!0,className:"px-4 py-2 font-semibold rounded bg-gray-400 text-gray-700 cursor-not-allowed",children:"Creditos insuficientes"}),e.jsx(M,{isOpen:b,onClose:()=>i(!1),children:e.jsxs("div",{children:[e.jsxs("span",{className:"pt-4",children:["Desea comprar este producto por ",t," créditos?"]}),e.jsxs("div",{className:"flex justify-between w-full mt-4",children:[e.jsx(c,{loading:g,onClick:()=>o(),children:"ACEPTAR"}),e.jsx(c,{onClick:()=>i(!0),children:"CERRAR"})]})]})})]})}function z(){const s=k(a=>a.auth.user),[b,i]=r.useState(!1),[g,m]=r.useState(!1),[y,_]=r.useState(),[l,u]=r.useState(!1),[t,S]=r.useState(79),D=a=>{if(a&&a.seconds>new Date().getTime()/1e3){const x=Math.floor((a.seconds-new Date().getTime()/1e3)/60/60/24);u(!0),_(x+" días restantes")}else u(!1)};r.useEffect(()=>{s&&s.insta_ads_expires_at?D(s.insta_ads_expires_at):u(!1)},[s]);const o=async()=>{m(!0);try{await f(t),await p()}catch{console.log("Error en la compra de Insta Ads")}finally{i(!1),m(!1)}},f=async a=>{const x=new Date,h=new Date;h.setDate(x.getDate()+30);const j=N(d,`users/${s.uid}`);await C(j,{credits:Number(s.credits)-t,insta_ads_expires_at:h}),await v(A(d,`users/${s.uid}/credits-history/`),{id_user:s.uid,email:s.email,name:s.name,total:a,created_at:x,concept:"Compra de Acceso de Insta Ads",insta_ads_expires_at:h}),await v(A(d,`users/${s.uid}/digital-marketplace-purchases/`),{user_id:s.uid,email:s.email,purchase:"Compra de Acceso de Insta Ads",cost:t,created_at:new Date})},p=async()=>{if(!s.uid)return;const a=N(d,"users",s.uid);await C(a,{credits_spent_this_month:P(Number(t))})};return e.jsxs("div",{className:"bg-gray-100 flex flex-col items-center rounded-lg px-4 pb-4",children:[e.jsx("img",{src:"/img/digital-marketplace/marketing-top-ads.png",className:"max-w-[250px] max-h-[250px] flex-1 object-contain"}),e.jsx("div",{className:"flex justify-start w-full text-lg",children:e.jsx("span",{className:"font-bold",children:"Acceso a Insta Ads"})}),e.jsxs("div",{className:"flex justify-start w-full space-x-2",children:[e.jsxs("span",{className:"font-medium",children:[t," créditos"]}),e.jsxs("span",{className:"line-through text-gray-400",children:[t+20," créditos"]})]}),e.jsx("div",{className:"flex justify-start w-full space-x-2",children:l?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"font-bold text-green-400",children:"Activa:"}),e.jsx("span",{className:" text-gray-400",children:y})]}):e.jsx("div",{className:"flex flex-col",children:e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Duración:"}),e.jsx("span",{className:" text-gray-400",children:"30 días"})]})})}),e.jsxs("div",{className:"flex justify-start items-center w-full pb-4 space-x-2",children:[e.jsxs("div",{className:"flex justify-start text-yellow-500 space-x-1",children:[e.jsx(n,{}),e.jsx(n,{}),e.jsx(n,{}),e.jsx(n,{}),e.jsx(n,{})]}),e.jsx("div",{children:e.jsx("span",{className:"font-medium",children:"En existencia"})})]}),s&&typeof s.credits=="number"?s.credits<t?e.jsx(c,{disabled:!0,className:"px-4 py-2 font-semibold rounded bg-gray-400 text-gray-700 cursor-not-allowed mt-4",children:"Creditos insuficientes"}):e.jsx(c,{disabled:l,className:"px-4 py-2 font-semibold rounded bg-gray-400 text-gray-700 mt-4",onClick:()=>i(!0),children:l?y:"Comprar Acceso"}):e.jsx(c,{disabled:!0,className:"px-4 py-2 font-semibold rounded bg-gray-400 text-gray-700 cursor-not-allowed",children:"Creditos insuficientes"}),e.jsx(M,{isOpen:b,onClose:()=>i(!1),children:e.jsxs("div",{children:[e.jsxs("span",{className:"pt-4",children:["Desea comprar este producto por ",t," créditos?"]}),e.jsxs("div",{className:"flex justify-between w-full mt-4",children:[e.jsx(c,{loading:g,onClick:()=>o(),children:"ACEPTAR"}),e.jsx(c,{onClick:()=>i(!0),children:"CERRAR"})]})]})})]})}function I(){const s=k(a=>a.auth.user),[b,i]=r.useState(!1),[g,m]=r.useState(!1),[y,_]=r.useState(),[l,u]=r.useState(!1),[t,S]=r.useState(49),D=a=>{if(a&&a.seconds>new Date().getTime()/1e3){const x=Math.floor((a.seconds-new Date().getTime()/1e3)/60/60/24);u(!0),_(x+" días restantes")}else u(!1)};r.useEffect(()=>{s&&s.flow_bot_expires_at?D(s.flow_bot_expires_at):u(!1)},[s]);const o=async()=>{m(!0);try{await f(t),await p()}catch{console.log("Error en la compra de Flow Bot")}finally{i(!1),m(!1)}},f=async a=>{const x=new Date,h=new Date;h.setDate(x.getDate()+30);const j=N(d,`users/${s.uid}`);await C(j,{credits:Number(s.credits)-t,flow_bot_expires_at:h}),await v(A(d,`users/${s.uid}/credits-history/`),{id_user:s.uid,email:s.email,name:s.name,total:a,created_at:x,concept:"Compra de Acceso de Flow Bot",flow_bot_expires_at:h}),await v(A(d,`users/${s.uid}/digital-marketplace-purchases/`),{user_id:s.uid,email:s.email,purchase:"Compra de Acceso de Flow Bot",cost:t,created_at:new Date})},p=async()=>{if(!s.uid)return;const a=N(d,"users",s.uid);await C(a,{credits_spent_this_month:P(Number(t))})};return e.jsxs("div",{className:"bg-gray-100 flex flex-col items-center rounded-lg px-4 pb-4",children:[e.jsx("img",{src:"/img/digital-marketplace/marketing-top-bot.png",className:"max-w-[250px] max-h-[250px] flex-1 object-contain"}),e.jsx("div",{className:"flex justify-start w-full text-lg",children:e.jsx("span",{className:"font-bold",children:"Acceso a Flow Bot"})}),e.jsxs("div",{className:"flex justify-start w-full space-x-2",children:[e.jsxs("span",{className:"font-medium",children:[t," créditos"]}),e.jsxs("span",{className:"line-through text-gray-400",children:[t+20," créditos"]})]}),e.jsx("div",{className:"flex justify-start w-full space-x-2",children:l?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"font-bold text-green-400",children:"Activa:"}),e.jsx("span",{className:" text-gray-400",children:y})]}):e.jsx("div",{className:"flex flex-col",children:e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Duración:"}),e.jsx("span",{className:" text-gray-400",children:"30 días"})]})})}),e.jsxs("div",{className:"flex justify-start items-center w-full pb-4 space-x-2",children:[e.jsxs("div",{className:"flex justify-start text-yellow-500 space-x-1",children:[e.jsx(n,{}),e.jsx(n,{}),e.jsx(n,{}),e.jsx(n,{}),e.jsx(n,{})]}),e.jsx("div",{children:e.jsx("span",{className:"font-medium",children:"En existencia"})})]}),s&&typeof s.credits=="number"?s.credits<t?e.jsx(c,{disabled:!0,className:"px-4 py-2 font-semibold rounded bg-gray-400 text-gray-700 cursor-not-allowed mt-4",children:"Creditos insuficientes"}):e.jsx(c,{disabled:l,className:"px-4 py-2 font-semibold rounded bg-gray-400 text-gray-700 mt-4",onClick:()=>i(!0),children:l?y:"Comprar Acceso"}):e.jsx(c,{disabled:!0,className:"px-4 py-2 font-semibold rounded bg-gray-400 text-gray-700 cursor-not-allowed",children:"Creditos insuficientes"}),e.jsx(M,{isOpen:b,onClose:()=>i(!1),children:e.jsxs("div",{children:[e.jsxs("span",{className:"pt-4",children:["Desea comprar este producto por ",t," créditos?"]}),e.jsxs("div",{className:"flex justify-between w-full mt-4",children:[e.jsx(c,{loading:g,onClick:()=>o(),children:"ACEPTAR"}),e.jsx(c,{onClick:()=>i(!0),children:"CERRAR"})]})]})})]})}function q(){const s=k(a=>a.auth.user),[b,i]=r.useState(!1),[g,m]=r.useState(!1),[y,_]=r.useState(),[l,u]=r.useState(!1),[t,S]=r.useState(95),D=a=>{if(a&&a.seconds>new Date().getTime()/1e3){const x=Math.floor((a.seconds-new Date().getTime()/1e3)/60/60/24);u(!0),_(x+" días restantes")}else u(!1)};r.useEffect(()=>{s&&s.pack_marketing_expires_at?D(s.pack_marketing_expires_at):u(!1)},[s]);const o=async()=>{m(!0);try{await f(t),await p()}catch{console.log("Error en la compra de Pack Marketing")}finally{i(!1),m(!1)}},f=async a=>{const x=new Date,h=new Date;h.setDate(x.getDate()+30);const j=N(d,`users/${s.uid}`);await C(j,{credits:Number(s.credits)-t,pack_marketing_expires_at:h}),await v(A(d,`users/${s.uid}/credits-history/`),{id_user:s.uid,email:s.email,name:s.name,total:a,created_at:x,concept:"Compra de Acceso de Pack Marketing",pack_marketing_expires_at:h}),await v(A(d,`users/${s.uid}/digital-marketplace-purchases/`),{user_id:s.uid,email:s.email,purchase:"Compra de Acceso de Pack Marketing",cost:t,created_at:new Date})},p=async()=>{if(!s.uid)return;const a=N(d,"users",s.uid);await C(a,{credits_spent_this_month:P(Number(t))})};return e.jsxs("div",{className:"bg-gray-100 flex flex-col items-center rounded-lg px-4 pb-4",children:[e.jsx("img",{src:"/img/digital-marketplace/marketing-top-pack-amrketing.png",className:"max-w-[250px] max-h-[250px] flex-1 object-contain"}),e.jsx("div",{className:"flex justify-start w-full text-lg",children:e.jsx("span",{className:"font-bold",children:"Acceso a Pack Marketing"})}),e.jsxs("div",{className:"flex justify-start w-full space-x-2",children:[e.jsxs("span",{className:"font-medium",children:[t," créditos"]}),e.jsxs("span",{className:"line-through text-gray-400",children:[t+20," créditos"]})]}),e.jsx("div",{className:"flex justify-start w-full space-x-2",children:l?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"font-bold text-green-400",children:"Activa:"}),e.jsx("span",{className:" text-gray-400",children:y})]}):e.jsx("div",{className:"flex flex-col",children:e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Duración:"}),e.jsx("span",{className:" text-gray-400",children:"30 días"})]})})}),e.jsxs("div",{className:"flex justify-start items-center w-full pb-4 space-x-2",children:[e.jsxs("div",{className:"flex justify-start text-yellow-500 space-x-1",children:[e.jsx(n,{}),e.jsx(n,{}),e.jsx(n,{}),e.jsx(n,{}),e.jsx(n,{})]}),e.jsx("div",{children:e.jsx("span",{className:"font-medium",children:"En existencia"})})]}),s&&typeof s.credits=="number"?s.credits<t?e.jsx(c,{disabled:!0,className:"px-4 py-2 font-semibold rounded bg-gray-400 text-gray-700 cursor-not-allowed mt-4",children:"Creditos insuficientes"}):e.jsx(c,{disabled:l,className:"px-4 py-2 font-semibold rounded bg-gray-400 text-gray-700 mt-4",onClick:()=>i(!0),children:l?y:"Comprar Acceso"}):e.jsx(c,{disabled:!0,className:"px-4 py-2 font-semibold rounded bg-gray-400 text-gray-700 cursor-not-allowed",children:"Creditos insuficientes"}),e.jsx(M,{isOpen:b,onClose:()=>i(!1),children:e.jsxs("div",{children:[e.jsxs("span",{className:"pt-4",children:["Desea comprar este producto por ",t," créditos?"]}),e.jsxs("div",{className:"flex justify-between w-full mt-4",children:[e.jsx(c,{loading:g,onClick:()=>o(),children:"ACEPTAR"}),e.jsx(c,{onClick:()=>i(!0),children:"CERRAR"})]})]})})]})}function X(){const s=k(o=>o.auth.user),[b,i]=r.useState(!1),[g,m]=r.useState(!1),[y,_]=r.useState(),l=$(),u=o=>{if(o&&o.seconds>new Date().getTime()/1e3){const f=Math.floor((o.seconds-new Date().getTime()/1e3)/60/60/24);m(!0),_(f+" días restantes");return}m(!1)};r.useEffect(()=>{s&&s.academy_access_expires_at?u(s.academy_access_expires_at):m(!1)},[s]);const t=async()=>{var p;const o=N(d,`users/${s.uid}`);return((p=(await L(o)).data())==null?void 0:p.credits)>=0},S=async()=>{const o=new Date,f=new Date(o);f.setDate(o.getDate()+30);const p=await N(d,`users/${s.uid}`),a=await L(p);if(await t()){if(a.exists()){const h=a.data().credits;await C(p,{credits:h-100,academy_access_expires_at:f})}D(100)}i(!1),l("/home")},D=async o=>{const f=new Date,p=new Date(f);p.setDate(f.getDate()+30),await v(A(d,`users/${s.uid}/credits-history/`),{id_user:s.uid,email:s.email,name:s.name,total:o,created_at:new Date,concept:"Compra en Marketplace Servicios Digital",academy_access_expires_at:p})};return e.jsxs("div",{children:[e.jsx("img",{src:"/img/empoweritup.png",className:"w-[400px]"}),e.jsx("p",{className:"text-lg italic my-4",children:"Arma tu carrito con nuestros productos digitales"}),e.jsxs("div",{className:"grid grid-cols-1  lg:grid-cols-2 xl:grid-cols-3 2xl:grid-cols-4 gap-x-4 gap-y-4",children:[e.jsx(O,{}),e.jsx(H,{}),e.jsx(B,{}),e.jsx(z,{}),e.jsx(I,{}),e.jsx(q,{})]}),e.jsx(M,{isOpen:b,onClose:()=>i(!1),children:e.jsxs("div",{children:[e.jsx("span",{className:"pt-4",children:"Desea comprar este producto por 100 créditos?"}),e.jsxs("div",{className:"flex justify-between w-full mt-4",children:[e.jsx(c,{onClick:()=>S(),children:"ACEPTAR"}),e.jsx(c,{onClick:()=>i(!0),children:"CERRAR"})]})]})})]})}export{X as default};
