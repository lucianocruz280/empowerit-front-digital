import{j as s,q as h,d as u,aT as p,aU as j,c as g,a as m,aW as f,r as l,o as v,bg as N,aD as b,g as y}from"./index-dd631538.js";import{S as r}from"./SkeletonVideo-2ff1d07f.js";import{C as L}from"./ConditionalWrapper-9fa2e41e.js";import{u as w}from"./useLives-8c8f014a.js";import"./Academy.utils-167d070d.js";import"./Academy.definition-2f8eb162.js";const D=({lesson:e,courseId:a})=>{var i;return s.jsx(L,{condition:e.status!="scheduled",wrapper:t=>s.jsx(h,{to:`/academy-leadership/course/${a}/lesson/${e.id}`,children:t}),children:s.jsxs("div",{className:"w-68",children:[s.jsxs("div",{className:"aspect-video w-full bg-gray-700 overflow-hidden relative",children:[s.jsx("img",{src:e.image_cover,alt:"",className:"w-full h-full object-cover"}),s.jsx("div",{className:"absolute right-0 bottom-0 bg-gray-500/50 p-1 text-white z-10",children:e.duration})]}),s.jsx("div",{className:"flex mt-2",children:s.jsxs("div",{className:"ml-2",children:[s.jsx("div",{className:"text-sm font-bold",children:e.name}),s.jsxs("div",{className:"text-xs text-gray-600",children:[s.jsx("p",{children:(i=e.author)==null?void 0:i.name}),s.jsxs("p",{children:[u(e.created_at.seconds*1e3).fromNow()," "]})]})]})})]})})},S=({lesson:e,courseId:a})=>s.jsx(h,{to:`/academy-leadership/course/${a}/live/${e.id}`,children:s.jsxs("div",{className:"w-68",children:[s.jsxs("div",{className:"aspect-video w-full bg-gray-700 overflow-hidden relative",children:[s.jsx("img",{src:e.image_cover,alt:"",className:"w-full h-full object-cover"}),s.jsx("div",{className:"absolute right-0 bottom-0 bg-gray-500/50 p-1 text-white z-10",children:e.duration})]}),s.jsx("div",{className:"flex mt-2",children:s.jsx("div",{className:"ml-2",children:s.jsx("div",{className:"text-sm font-bold",children:u(e.date.seconds*1e3).format("DD MMMM YYYY")})})})]})});async function E(e){try{const a=[];return(await p(j(g(m,"courses-leadership/"+e+"/lessons"),f("order","asc")))).docs.forEach(t=>{a.push({id:t.id,...t.data()})}),{status:"success",data:a}}catch(a){return{status:"failed",e:a}}}const $=(e,a=!1)=>{const[i,t]=l.useState([]),[n,o]=l.useState(!1);return l.useEffect(()=>{if(o(!0),a){const c=v(j(g(m,`courses-leadership/${e}/lessons`),f("order","asc")),d=>{t(d.docs.map(x=>({id:x.id,...x.data()})))});return()=>{c()}}else E(e).then(c=>{c.data?t(c.data):t([])}).finally(()=>{o(!1)})},[e]),{data:i,isLoading:n}},z=()=>{const{courseId:e}=N(),[a,i]=l.useState({name:""}),{data:t,isLoading:n}=$(e),{data:o,isLoading:c}=w(e);return l.useEffect(()=>{b(y(m,"courses-leadership/"+e)).then(d=>{i(d.data())})},[e]),s.jsxs("div",{className:"flex flex-col space-y-8",children:[s.jsxs("div",{children:[s.jsxs("h3",{className:"text-xl font-bold",children:["Academia de ",a.name]}),s.jsxs("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-y-10 gap-x-2",children:[n&&s.jsxs(s.Fragment,{children:[s.jsx(r,{}),s.jsx(r,{}),s.jsx(r,{}),s.jsx(r,{})]}),t.map(d=>s.jsx(D,{lesson:d,courseId:e},d.id))]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-xl font-bold",children:"Clases en vivo (grabadas)"}),s.jsxs("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-y-10 gap-x-2",children:[c&&s.jsxs(s.Fragment,{children:[s.jsx(r,{}),s.jsx(r,{}),s.jsx(r,{}),s.jsx(r,{})]}),o.map(d=>s.jsx(S,{lesson:d,courseId:e},d.id))]})]})]})};export{z as default};
