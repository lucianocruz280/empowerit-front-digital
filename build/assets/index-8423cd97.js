import{r as i,u as v,aT as D,aU as N,aW as _,c as S,j as s,bq as M,br as k,bs as f,bt as t,bu as q,bv as c,D as A,d as o,a as U,aX as l}from"./index-dd631538.js";import{a as F}from"./Views-34b2bc56.js";const H=()=>{const P=F(e=>e),[h,g]=i.useState([]),[C,j]=i.useState(null),[m,T]=i.useState([]),r=v(e=>e.auth.user),u=r==null?void 0:r.uid;i.useEffect(()=>{D(N(S(U,"users/"+u+"/payroll"),_("created_at","desc"))).then(e=>{const n=e.docs.map(async d=>{const a=d.data(),x=a.created_at.toDate().toLocaleString();return{...a,formattedDate:x}});Promise.all(n).then(d=>{g(d)})})},[]);const B=async(e,n)=>{const d=h[n+1<h.length?n+1:0];j(e.id);const a=o(e.created_at.seconds*1e3),b=o(d.created_at.seconds*1e3),x=await D(N(S(U,`users/${u}/profits_details`),l("created_at",">=",b.toDate()),l("created_at","<=",a.endOf("day").subtract(1,"hour").toDate()),_("created_at","asc")));T(x.docs.map(w=>({id:w.id,...w.data()})))};return s.jsx("div",{className:"flex flex-col items-end space-y-8",children:s.jsxs("div",{className:"w-full",children:[s.jsxs(M,{children:[s.jsx(k,{children:s.jsxs(f,{children:[s.jsx(t,{}),s.jsx(t,{children:"Fecha de pago"}),s.jsx(t,{children:"Binario"}),s.jsx(t,{children:"Puntos de binario"}),s.jsx(t,{children:"Lado de binario cobrado"}),s.jsx(t,{children:"Puntos izquierda"}),s.jsx(t,{children:"Puntos derecha"}),s.jsx(t,{children:"Cantidad LTC"}),s.jsx(t,{children:"Bono Inicio Rapido"}),s.jsx(t,{children:"Bono Binario"}),s.jsx(t,{children:"Bono Mentor"}),s.jsx(t,{children:"Bono Carro"}),s.jsx(t,{children:"Subtotal USD"}),s.jsx(t,{children:"ComisiÃ³n"}),s.jsx(t,{children:"Total USD"})]})}),s.jsx(q,{children:h.map((e,n)=>{var d;return s.jsxs(f,{children:[s.jsx(c,{className:"whitespace-nowrap",children:s.jsx("span",{className:"underline text-blue-400 hover:cursor-pointer hover:text-blue-600 select-none",onClick:()=>B(e,n),children:"Ver detalles"})}),s.jsx(c,{children:e==null?void 0:e.formattedDate}),s.jsxs(c,{className:"whitespace-nowrap",children:[((d=e==null?void 0:e.binary)==null?void 0:d.toFixed(2))||0," USD"]}),s.jsxs(c,{children:[(e==null?void 0:e.binary_points)||0," "]}),s.jsxs(c,{children:[(e==null?void 0:e.binary_side)||0," "]}),s.jsxs(c,{children:[(e==null?void 0:e.left_points)||0," "]}),s.jsx(c,{children:(e==null?void 0:e.right_points)||0}),s.jsxs(c,{className:"whitespace-nowrap",children:[(e==null?void 0:e.btc_amount)||0," BTC"]}),s.jsxs(c,{className:"whitespace-nowrap",children:[e==null?void 0:e.bond_quick_start," USD"]}),s.jsxs(c,{className:"whitespace-nowrap",children:[e==null?void 0:e.bond_binary," USD"]}),s.jsxs(c,{className:"whitespace-nowrap",children:[e==null?void 0:e.bond_mentor," USD"]}),s.jsxs(c,{className:"whitespace-nowrap",children:[(e==null?void 0:e.bond_car)||0," USD"]}),s.jsxs(c,{className:"whitespace-nowrap",children:[e==null?void 0:e.subtotal," USD"]}),s.jsxs(c,{className:"whitespace-nowrap",children:[e==null?void 0:e.fee," USD"]}),s.jsx(c,{className:"whitespace-nowrap",children:s.jsxs("b",{children:[e==null?void 0:e.total," USD"]})})]},e.id)})})]}),s.jsx(A,{isOpen:C,width:700,onClose:()=>j(null),children:s.jsx("div",{className:"pt-4",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{className:"text-left",children:"Concepto"}),s.jsx("th",{className:"text-left",children:"Usuario"}),s.jsx("th",{className:"text-right",children:"USD"}),s.jsx("th",{className:"text-right",children:"Fecha"})]})}),s.jsxs("tbody",{children:[m.map((e,n)=>s.jsxs("tr",{children:[s.jsx("td",{children:e.description}),s.jsx("td",{children:s.jsx("span",{className:"underline text-blue-500 hover:cursor-pointer",onClick:()=>P.openModal(e.id_user),children:e.user_name})}),s.jsx("td",{className:"text-right",children:e.amount}),s.jsx("td",{className:"text-right",children:e.created_at.seconds?o(e.created_at.seconds*1e3).format("DD/MM/YYYY HH:mm:ss"):null})]},n)),m.length==0&&s.jsx("tr",{children:s.jsx("td",{colSpan:4,className:"text-left",children:"No hay datos"})})]})]})})})]})})};export{H as default};
