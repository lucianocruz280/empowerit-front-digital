import{u as l,j as c,aZ as u,r as d,d as m,a2 as h,b0 as f,b1 as T,aU as S,c as C,a as g,aX as w,aT as j,bp as b}from"./index-dd631538.js";import{S as x}from"./index.esm-bb4ad11f.js";const O=async(t,e,n,a,s,r)=>{console.log("el method",s);try{s=="Fiat"&&await fetch(`https://empowerit-api.vercel.app/subscriptions/createPaymentAddress/${e}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:t,type:e,coin:n,period:a})}),s=="Coinpayments"&&await fetch("https://empowerit-api.vercel.app/coinpayments/create-transaction/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({uid:t,type:e,buyer_email:r,currency1:"USDT",currency2:"USDT.TRC20",period:a,cmd:"create_transaction"})})}catch(o){console.error(o)}},N=async(t,e,n,a,s)=>{try{a=="Fiat"&&await fetch(`https://empowerit-api.vercel.app/subscriptions/createPaymentAddressForParticipations/${e}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:t,type:e,coin:n})}),a=="Coinpayments"&&await fetch("https://empowerit-api.vercel.app/coinpayments/create-transaction/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({uid:t,type:e,buyer_email:s,currency1:"USDT",currency2:"USDT.TRC20",cmd:"create_transaction"})})}catch(r){console.error(r)}},$=async(t,e,n,a,s)=>{try{a=="Fiat"&&await fetch(`https://empowerit-api.vercel.app/subscriptions/createPaymentAddressForCredits/${e}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:t,coin:n})}),a=="Coinpayments"&&await fetch("https://empowerit-api.vercel.app/coinpayments/create-transaction/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({uid:t,type:e,buyer_email:s,currency1:"USDT",currency2:"USDT.TRC20",cmd:"create_transaction"})})}catch(r){console.error(r)}},D=async(t,e,n,a,s)=>{try{a=="Fiat"&&await fetch(`https://empowerit-api.vercel.app/subscriptions/createPaymentAddressForAutomaticFranchises/${e}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:t,coin:n})}),a=="Coinpayments"&&await fetch("https://empowerit-api.vercel.app/coinpayments/create-transaction/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({uid:t,type:e,buyer_email:s,currency1:"USDT",currency2:"USDT.TRC20",cmd:"create_transaction"})})}catch(r){console.error(r)}},k=()=>{const t=l(e=>e.auth.user);return c.jsxs("div",{className:"flex flex-col justify-center items-center",children:[c.jsx("span",{children:t==null?void 0:t.email}),c.jsx("span",{children:"Se está confirmando tu transacción"}),c.jsx("span",{children:"Esto puede tardar varios minutos"}),c.jsx("div",{className:"bg-green-400 rounded-full p-4 w-min mt-8",children:c.jsx(u,{fontSize:40})}),c.jsx("span",{className:"mt-8",children:"Tu membresia quedará activada pronto"})]})},A=(t,e)=>{const[n,a]=d.useState("");return d.useEffect(()=>{if(t){const s=setInterval(()=>{const r=m(t).diff(new Date,"minutes"),o=m(t).diff(new Date,"seconds"),i=o-r*60;o==0&&e&&e(),a(`${r}:${i}`)},1e3);return()=>clearInterval(s)}},[t]),n};function U(t){return h({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"9",y:"9",width:"13",height:"13",rx:"2",ry:"2"}},{tag:"path",attr:{d:"M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"}}]})(t)}const I=()=>({copy:async e=>{await navigator.clipboard.writeText(e),f.push(c.jsx(T,{title:"Copiado",type:"success"}),{placement:"top-center"})}}),J=async(t,e)=>{var n,a;try{const s=S(C(g,`users/${t}/transactions`),w("data.item.address","==",e)),r=await j(s),{size:o}=r;let i=0;for(let p=0;p<o;p++){const y=r.docs[p].data();i+=Number.parseFloat((a=(n=y.data)==null?void 0:n.item)==null?void 0:a.amount)}return i}catch(s){return console.error("Error al obtener monto pagado: ",s),0}},L={BTC:c.jsx(b,{}),LTC:c.jsx("img",{src:"/img/ltc-logo.svg",height:12,width:12,className:"h-[12px] w-[12px]"}),MXN:c.jsx(x,{})};export{k as C,U as F,I as a,$ as b,L as c,O as d,N as e,D as f,J as g,A as u};
