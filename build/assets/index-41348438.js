import{r as t,j as s,d as M,aT as d,aU as l,aW as y,aX as C,bR as v,a as n,aD as T,g as E,c as u}from"./index-dd631538.js";const I=()=>{const[N,i]=t.useState(!0),[r,w]=t.useState([]),[o,f]=t.useState([]),[x,g]=t.useState([]),b=async()=>{var c;i(!0);const e=[],a=await d(l(v(n,"transactions"),C("data.event","==","ADDRESS_COINS_TRANSACTION_CONFIRMED"),y("created_at","desc")));for(const j of a.docs)e.push({...j.data(),user:await T(E(n,`users/${(c=j.ref.parent.parent)==null?void 0:c.id}`)).then(_=>_.data())});i(!1),w(e)},S=async()=>{const e=[],a=await d(l(u(n,"payroll")));for(const c of a.docs)e.push({amount:c.get("total_btc")});f(e)},D=async()=>{const e=[],a=await d(l(u(n,"withdraws")));for(const c of a.docs)e.push({amount:c.get("amount")});g(e)};t.useEffect(()=>{b(),S(),D()},[]);const h=t.useMemo(()=>r.reduce((e,a)=>e+(Number(a.data.item.amount)||0),0),[r]),m=t.useMemo(()=>Math.ceil(o.reduce((e,a)=>e+Number(a.amount),0)*100)/100,[o]),p=t.useMemo(()=>Math.ceil(x.reduce((e,a)=>e+Number(a.amount),0)*100)/100,[x]);return s.jsxs("div",{children:[s.jsxs("div",{className:"mb-8 flex space-x-4",children:[s.jsxs("div",{className:"border border-solid rounded-md p-8 w-min",children:[s.jsxs("span",{className:"whitespace-nowrap",children:[s.jsx("span",{className:"text-xl text-green-500",children:h}),s.jsx("span",{children:" LTC"})]}),s.jsx("br",{}),s.jsxs("p",{className:"text-sm whitespace-nowrap",children:["Suma total ",s.jsx("span",{children:"(entradas)"})]})]}),s.jsxs("div",{className:"border border-solid rounded-md p-8 w-min",children:[s.jsxs("span",{className:"whitespace-nowrap",children:[s.jsx("span",{className:"text-xl text-red-500",children:m}),s.jsx("span",{children:" LTC"})]}),s.jsx("br",{}),s.jsxs("p",{className:"text-sm whitespace-nowrap",children:["Suma total ",s.jsx("span",{children:"(pagos)"})]})]}),s.jsxs("div",{className:"border border-solid rounded-md p-8 w-min",children:[s.jsxs("span",{className:"whitespace-nowrap",children:[s.jsx("span",{className:"text-xl text-red-500",children:p}),s.jsx("span",{children:" LTC"})]}),s.jsx("br",{}),s.jsxs("p",{className:"text-sm whitespace-nowrap",children:["Suma total ",s.jsx("span",{children:"(retiros)"})]})]}),s.jsxs("div",{className:"border border-solid rounded-md p-8 w-min",children:[s.jsxs("span",{className:"whitespace-nowrap",children:[s.jsx("span",{className:"text-xl",children:Math.floor((h-m-p)*100)/100}),s.jsx("span",{children:" LTC"})]}),s.jsx("br",{}),s.jsxs("p",{className:"text-sm whitespace-nowrap",children:["Balance ",s.jsx("span",{children:"(aprox)"})]})]})]}),s.jsxs("table",{className:"w-full",children:[s.jsxs("tr",{children:[s.jsx("th",{className:"text-left",children:"Usuario"}),s.jsx("th",{className:"text-left",children:"Wallet"}),s.jsx("th",{className:"text-right",children:"Amount"}),s.jsx("th",{children:"Currency"}),s.jsx("th",{children:"DirecciÃ³n"}),s.jsx("th",{className:"text-left",children:"Fecha"})]}),N&&s.jsx("tr",{children:s.jsx("th",{colSpan:6,className:"text-center",children:s.jsx("span",{className:"text-xl",children:"cargando..."})})}),r.map(e=>s.jsxs("tr",{children:[s.jsx("td",{className:"text-left",children:e.user.email}),s.jsx("td",{className:"text-left",children:e.data.item.address}),s.jsx("td",{className:"text-right",children:e.data.item.amount}),s.jsx("td",{className:"text-center",children:e.data.item.unit}),s.jsx("td",{className:"text-center text-green-600",children:"Entrante"}),s.jsx("td",{className:"text-left",children:M(e.created_at.seconds*1e3).format("YYYY-MM-DD HH:mm:ss")})]},e.id))]})]})};export{I as default};
