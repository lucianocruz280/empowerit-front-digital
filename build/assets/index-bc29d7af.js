import{r as l,j as a,I as u,b8 as N,cp as P,B as S,aT as y,aU as I,c as w,a as T,aX as A,b0 as h,b1 as x}from"./index-dd631538.js";import{a as E}from"./packs-85a17dc4.js";const O={"3000-participation":6e3},_={email:"",participation_name:"3000-participation",starts_at:"",participation_cap_current:0};function F(){const[f,p]=l.useState(!1),[j,v]=l.useState({label:"Participación 3000",value:"3000-participation",image:"/img/memberships/p300.png"}),[i,c]=l.useState(_),[r,o]=l.useState({email:"",starts_at:"",participation_cap_current:""}),m=s=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(s),d=s=>{const{name:t,value:e}=s.target;c(n=>({...n,[t]:e})),t==="email"&&o(n=>({...n,email:m(e)?"":"Correo electrónico no válido"}))},g=s=>{c(t=>({...t,starts_at:s}))},b=s=>{v(s),c(t=>({...t,participation_name:s.value}))},C=async s=>{s.preventDefault();let t=!0;if(m(i.email)||(o(e=>({...e,email:"Correo electrónico no válido"})),t=!1),i.starts_at===""&&(o(e=>({...e,starts_at:"La fecha de inicio no puede estar vacía"})),t=!1),(i.participation_cap_current<0||i.participation_cap_current>O[i.participation_name])&&(o(e=>({...e,participation_cap_current:"Ingrese un numero válido"})),t=!1),t){p(!0);try{const e=await y(I(w(T,"users"),A("email","==",i.email)));if(e.empty)h.push(a.jsx(x,{title:"Usuario no existe",type:"warning"}),{placement:"top-center"});else{const n=e.docs[0].id;await fetch("https://empowerit-api.vercel.app/participations/activateWithoutVolumen",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({form:i,user_id:n})}),h.push(a.jsx(x,{title:"Participación Activada!!",type:"success"}),{placement:"top-center"})}}catch(e){console.error(e)}finally{p(!1),c(_)}}else console.log("Errores en el formulario",r)};return a.jsx("div",{children:a.jsxs("form",{className:"flex flex-col space-y-3",onSubmit:C,children:[a.jsxs("div",{className:"md:w-1/2",children:[a.jsx("label",{children:"Correo Electrónico: "}),a.jsx(u,{placeholder:"Email",name:"email",value:i.email,onChange:d}),r.email&&a.jsx("span",{className:"text-red-500",children:r.email})]}),a.jsxs("div",{className:"md:w-1/2",children:[a.jsx("label",{children:"Participación: "}),a.jsx(N,{className:"w-full",options:E,value:j,name:"participation_name",onChange:b})]}),a.jsxs("div",{className:"md:w-1/2",children:[a.jsx("label",{children:"Fecha de inicio: "}),a.jsx(P,{selected:i.starts_at,placeholderText:"Selecciona una fecha",onChange:g}),r.starts_at&&a.jsx("span",{className:"text-red-500",children:r.starts_at})]}),a.jsxs("div",{className:"md:w-1/2",children:[a.jsx("label",{children:"Ganancia Actual: "}),a.jsx(u,{type:"number",placeholder:"123",name:"participation_cap_current",value:i.participation_cap_current,onChange:d})]}),r.participation_cap_current&&a.jsx("span",{className:"text-red-500",children:r.participation_cap_current}),a.jsx("div",{children:a.jsx(S,{loading:f,children:"Activar"})})]})})}export{F as default};
